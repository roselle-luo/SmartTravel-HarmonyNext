import { Prompt, router } from "@kit.ArkUI";
import { resourceManager } from "@kit.LocalizationKit";

interface FeatureItem {
  icon: string;
  name: string;
}

@Component
export struct ProfilePage {
  @State userName: string = 'æ—…è¡Œè€…å°ç²²';
  @State userAvatar: Resource = $r('app.string.AvatarUrl');
  @State userBio: string = 'çƒ­çˆ±æŽ¢ç´¢ä¸–ç•Œï¼Œè®°å½•ç¾Žå¥½ç”Ÿæ´»';
  private featureList: FeatureItem[] = [
    { icon: 'ðŸ—ºï¸', name: 'æŠ¥åæƒ…å†µ' },
    { icon: 'ðŸ“¸', name: 'æˆ‘çš„ç›¸å†Œ' },
    { icon: 'â¤ï¸', name: 'æˆ‘çš„æ”¶è—' },
    { icon: 'ðŸ“', name: 'æˆ‘çš„æ”»ç•¥' },
    { icon: 'ðŸ·ï¸', name: 'ä¼˜æƒ åˆ¸' },
    { icon: 'âš™ï¸', name: 'è®¾ç½®' },
    { icon: 'â“', name: 'å¸®åŠ©ä¸Žåé¦ˆ' },
    { icon: 'ðŸ—ºï¸', name: 'æˆ‘çš„è¡Œç¨‹' },
    { icon: 'ðŸ“¸', name: 'æˆ‘çš„ç›¸å†Œ' },
    { icon: 'â¤ï¸', name: 'æˆ‘çš„æ”¶è—' },
    { icon: 'ðŸ“', name: 'æˆ‘çš„æ”»ç•¥' },
    { icon: 'ðŸ·ï¸', name: 'ä¼˜æƒ åˆ¸' },
    { icon: 'âš™ï¸', name: 'è®¾ç½®' },
    { icon: 'â“', name: 'å¸®åŠ©ä¸Žåé¦ˆ' }
  ];

  build() {
    Scroll() {
      Column() {
        // é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ
        Column() {
          Image(this.userAvatar)
            .width(80)
            .height(80)
            .borderRadius(40)
            .border({ width: 2, color: Color.White })
            .objectFit(ImageFit.Cover)
            .margin({ top: 40 })

          Text(this.userName)
            .fontSize(24)
            .fontWeight(FontWeight.Bold)
            .fontColor(Color.White)
            .margin({ top: 10 })

          Text(this.userBio)
            .fontSize(14)
            .fontColor(Color.White)
            .textAlign(TextAlign.Center)
            .maxLines(2)
            .textOverflow({ overflow: TextOverflow.Ellipsis })
            .margin({ left: 20, right: 20, bottom: 20 })
        }
        .width('100%')
        .backgroundColor('#3b82f6')
        .alignItems(HorizontalAlign.Center)

        // åŠŸèƒ½åˆ—è¡¨åŒºåŸŸ

        GridRow({
          columns: 20,
          gutter: { x: 12, y: 12 }
        }) {
          ForEach(this.featureList, (item: FeatureItem) => {
            GridCol({ span: { xs: 10, md: 5, lg: 4 } }) {
              functionEntry({ item: item })
            }
          })
        }
        .width('95%')
        .margin({ top: 20, bottom: 20 })

      }
      .width('100%')
      .backgroundColor('#f2f2f2')
    }
    .width('100%')
    .height('100%')
    .scrollBar(BarState.Off) // éšè— Scroll ç»„ä»¶çš„æ»šåŠ¨æ¡
  }
}

@Component
struct functionEntry {
  @Prop item: FeatureItem;

  build() {
    Column() {
      Text(this.item.icon)
        .fontSize(36)
        .margin({ bottom: 8 })

      Text(this.item.name)
        .fontSize(16)
        .fontColor(Color.Black)
    }
    .width('100%')
    .height(120)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .shadow({
      radius: 4,
      color: Color.Gray,
      offsetX: 0,
      offsetY: 2
    })
    .justifyContent(FlexAlign.Center)
    .onClick(() => {
      router.pushUrl({
        url: "pages/signup_data/SignUpData"
      })
      Prompt.showToast({
        message: `ç‚¹å‡»äº†ï¼š${this.item.name}`
      })
    })
  }
}
